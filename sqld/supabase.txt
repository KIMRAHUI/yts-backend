

DROP TABLE IF EXISTS comments;

CREATE TABLE comments (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id uuid NOT NULL,
  username text NOT NULL,
  movie_id text NOT NULL,
  content text NOT NULL,
  rating integer NOT NULL CHECK (rating >= 1 AND rating <= 5),
  created_at timestamp with time zone DEFAULT now()
);

-- created_at ìžë™ì •ë ¬ì„ ìœ„í•œ ì¸ë±ìŠ¤ ìƒì„± (ì„ íƒì‚¬í•­)
CREATE INDEX idx_comments_movie_id ON comments(movie_id);
CREATE INDEX idx_comments_user_id ON comments(user_id);
CREATE INDEX idx_comments_created_at ON comments(created_at);

-- ì˜ˆì‹œ ë°ì´í„° ì‚½ìž… (ì„ íƒ)
-- INSERT INTO comments (user_id, username, movie_id, content, rating)
-- VALUES ('some-user-id', 'kimrahui', '2001', 'ì¢‹ì€ ì˜í™”ì˜€ì–´ìš”!', 5);


-- ðŸ” users í…Œì´ë¸”ì„ ì™„ì „ížˆ ìƒˆë¡œ ìƒì„±í•˜ëŠ” ê²½ìš°

DROP TABLE IF EXISTS users;

CREATE TABLE users (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  username text NOT NULL,
  tel text,
  birth_year integer,
  password text NOT NULL,  -- âœ… ë¹„ë°€ë²ˆí˜¸ ì»¬ëŸ¼ ì¶”ê°€ë¨
  created_at timestamp with time zone DEFAULT now()
);

ALTER TABLE users
ADD COLUMN recovery_email text;


ALTER TABLE users
ADD COLUMN membership TEXT,
ADD COLUMN payment_type TEXT,
ADD COLUMN payment_bank TEXT,
ADD COLUMN payment_info TEXT,
ADD COLUMN payment_date TEXT,
ADD COLUMN receipt_email TEXT;



